<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Ocorrências por Dia da Semana</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    #container {
      width: 100%;
      height: 100%;
    }
  </style>

</head>

<body>
  <div id="container"></div>

  <script>
    const diasFixos = ['Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado', 'Domingo'];

    fetch('../json/cvli.json')
      .then(response => response.json())
      .then(data => {
        const contagem = {};
        data.forEach(item => {
          const dia = item.dia_da_semana;
          contagem[dia] = (contagem[dia] || 0) + 1;
        });

        const valores = diasFixos.map(dia => contagem[dia] || 0);
        const maxValor = Math.max(...valores);

        const seriesData = diasFixos.map(dia => {
          const valor = contagem[dia] || 0;
          if (valor === maxValor && maxValor > 0) {
            return {
              value: valor,
              itemStyle: {
                color: '#505372'
              }
            };
          }
          return valor;
        });

        const option = {
          title: {
            text: 'Ocorrências por Dia da Semana',
            left: 'center'
          },
          tooltip: {
            trigger: 'axis'
          },
          xAxis: {
            type: 'category',
            data: diasFixos
          },
          yAxis: {
            type: 'value'
          },
          series: [
            {
              type: 'bar',
              data: seriesData
            }
          ]
        };

        const chart = echarts.init(document.getElementById('container'));
        chart.setOption(option);
      })
      .catch(error => {
        console.error('Erro ao carregar o JSON:', error);
      });
  </script>
</body>
</html>