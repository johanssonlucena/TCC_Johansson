    markerClusterGroup.clearLayers();
    filtered
    .filter(d => selectedTypes.includes(d.subtipo))
    .forEach(d => {
        const marker = L.marker([d.latitude, d.longitude], { icon: icons[d.subtipo] })
            .bindPopup(
                `<strong>Tipo:</strong> Roubo ${d.subtipo}<br>` +
                `<strong>Bairro:</strong> ${d.bairro}<br>` +
                `<strong>Data:</strong> ${new Date(d.despachado).toLocaleString()}`
            );
        markerClusterGroup.addLayer(marker);
    });